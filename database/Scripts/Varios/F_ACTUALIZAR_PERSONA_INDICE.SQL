 CREATE OR REPLACE FUNCTION SII.F_ACTUALIZAR_INDICE_PERSONA(
)RETURNS VOID AS
$BODY$
DECLARE
	TMP_RECORD RECORD;
BEGIN

	FOR TMP_RECORD IN (SELECT 
			CRPER_CODIGO,
			CRPER_NOMBRES,
			CRPER_APELLIDO_PATERNO,
			CRPER_APELLIDO_MATERNO,
			CRPER_NUM_DOC_IDENTIFIC,
			CRPER_FECHA_NACIMIENTO,
			CRPER_LUGAR_NACIMIENTO,
			CRPER_OBSERVACIONES,
			CRPER_NUMERO_RESIDENCIA,
			CRPER_NUMERO_EXPEDIENTE,
			CRPER_FECHA_ARCHIVO,
			CRPER_FECHA_ULTIMO_EMPLEO,
			CRPER_ASPIRACION_SALARIAL,
			CRPER_FECHA_DEFUNCION,
			CRPER_NUMERO_ACTA
			FROM SII.CGG_RES_PERSONA ) LOOP
			UPDATE SII.CGG_RES_PERSONA SET CRPER_INDEX = TO_TSVECTOR(TMP_RECORD::VARCHAR)
				WHERE CRPER_CODIGO = TMP_RECORD.CRPER_CODIGO;
		END LOOP;
	
END
$BODY$
  LANGUAGE 'PLPGSQL' VOLATILE;  