
/**
* FUNCION SII.F_CGG_INSTITUCION_CONTACTO_SELECT_INSTITUCION_CONTACTO
* SELECCIONA TODOS LOS REGISTRO DE LA TABLA SII.CGG_INSTITUCION_CONTACTO QUE ESTAN.
* RELACIONADOS CON LA TABLA SII.CGG_INSTITUCION_EDUCATIVA Y CON LA TABLA SII.CGG_RES_TIPO_CONTACTO
* @param IN_CGIED_CODIGO IDENTIFICATIVO UNICO DE REGISTRO DE INSTITUTUCION EDUCATIVA
* @return REFCURSOR
*/
CREATE OR REPLACE FUNCTION SII.F_CGG_INSTITUCION_CONTACTO_SELECT_INSTITUCION_CONTACTO(
IN IN_CGIED_CODIGO SII.CGG_INSTITUCION_CONTACTO.CGIED_CODIGO%TYPE
)RETURNS SETOF REFCURSOR AS
$$
DECLARE
	TMP_REF REFCURSOR;
BEGIN
	OPEN TMP_REF FOR
	SELECT
		INCON.CINTC_CODIGO, 
		INCON.CGIED_CODIGO, 
		INCON.CRTCO_CODIGO, 
		INCON.CINTC_DESCRIPCION, 
		INCON.CINTC_CONTACTO,
		TCN.CRTCO_NOMBRE,
		TCN.CRTCO_NOMBRE_IMAGEN 
	FROM SII.CGG_INSTITUCION_CONTACTO INCON
	INNER JOIN SII.CGG_RES_TIPO_CONTACTO TCN
	ON INCON.CRTCO_CODIGO=TCN.CRTCO_CODIGO
	WHERE CINTC_ESTADO = TRUE AND 
		CGIED_CODIGO = IN_CGIED_CODIGO;
	RETURN NEXT TMP_REF;
END
$$
LANGUAGE 'plpgsql' VOLATILE CALLED ON NULL INPUT;