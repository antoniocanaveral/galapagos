/**
* FUNCION SII.F_CGG_RES_INFORME_TESTIGO_S_CGG_RES_MATRIMONIO
* SELECCIONA LA INFORMACION RELACIONADA A LA TABLA CGG_RES_INFORME_TESTIGO y CGG_RES_MATRIMONIO.
* @param IN_CRMTR_CODIGO IDENTIFICATIVO UNICO DE MATRIMONIO
* @return REFCURSOR
*/

CREATE OR REPLACE FUNCTION SII.F_CGG_RES_INFORME_TESTIGO_S_CGG_RES_MATRIMONIO(IN_CRMTR_CODIGO CHARACTER VARYING)
  RETURNS SETOF REFCURSOR AS
$BODY$
DECLARE
	TMP_REF REFCURSOR;
BEGIN
	OPEN TMP_REF FOR
	SELECT
		IT.CRINT_CODIGO, 
		IT.CRMTR_CODIGO, 
		IT.CRINT_NUMERO, 
		IT.CRINT_OBSERVACION, 
		IT.CRINT_ESTADO, 
		IT.CRINT_FECHA_INSERT, 
		IT.CRINT_USUARIO_INSERT, 
		IT.CRINT_FECHA_UPDATE, 
		IT.CRINT_USUARIO_UPDATE
	FROM SII.CGG_RES_INFORME_TESTIGO IT
	INNER JOIN SII.CGG_RES_MATRIMONIO MT ON IT.CRMTR_CODIGO  = MT.CRMTR_CODIGO 
	WHERE IT.CRINT_ESTADO = TRUE AND 
		MT.CRMTR_CODIGO = IN_CRMTR_CODIGO;
	RETURN NEXT TMP_REF;
END
$BODY$
  LANGUAGE 'PLPGSQL' VOLATILE
  COST 100
  ROWS 1000;