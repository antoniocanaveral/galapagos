<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="tct_residentes" language="groovy" pageWidth="243" pageHeight="153" orientation="Landscape" columnWidth="243" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isSummaryNewPage="true" uuid="99c533b7-6d87-4a37-848d-e1c871e4dcf0">
	<property name="ireport.zoom" value="2.1435888100000056"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="P_CRCNT_CODIGO" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="P_PREVIEW" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[1]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT CRPER.CRPER_CODIGO,
		CRPER.CRPER_NOMBRES NOMBRES,
		CRPER.CRPER_APELLIDO_PATERNO APELLIDOS_PATERNO,
		CRPER.CRPER_APELLIDO_MATERNO APELLIDOS_MATERNO,
		CRPER.CRPER_NUM_DOC_IDENTIFIC CEDULA,
		CRPER.CRPER_FECHA_NACIMIENTO FECHA_NAC,
		CRPER.CRPER_LUGAR_NACIMIENTO,
		CRDID.CRDID_DESCRIPCION,
		CRPER.CRPER_GENERO,
		CRPER.CRPER_OBSERVACIONES,
		CRPER.CRPER_NUMERO_RESIDENCIA RESIDENCIA,
		CRPER.CRPER_AUTORIZADO,
		CRPER.CRPER_NUMERO_EXPEDIENTE,
		CRPER.CRPER_FECHA_ARCHIVO,
		CRPER.CRPER_FOTO FOTO,
		CRPER.CRPER_FIRMA FIRMA,
		CRRSD.CRTST_CODIGO,
		CRRSD.CRRSD_MODALIDAD MODALIDAD,
		CRTST.CRTST_DESCRIPCION DESCRIPCION,
		CRNT.CRCNT_FECHA_APROBACION APROBACION,
		CRNT.CRCNT_FECHA_CADUCIDAD RENOVACION,
		CRNCN.CGNCN_NACIONALIDAD NACIONALIDAD,
	CASE WHEN TRM.CRPJR_CODIGO IS NULL THEN (SELECT COALESCE(CRPER_NOMBRES,'')||' '||COALESCE(CRPER_APELLIDO_PATERNO,'') FROM SII.CGG_RES_PERSONA WHERE CRPER_CODIGO = TRM.CRPER_CODIGO)
	ELSE
		pjr.crpjr_razon_social
	END AUSPICIANTE,
	CRTST.CRTST_DESCRIPCION MOTIVO,
	(SELECT CRPER_FIRMA FROM SII.CGG_RES_PERSONA WHERE CRPER_CODIGO = (SELECT CGCNF_VALOR_CADENA FROM SII.CGG_CONFIGURACION WHERE CGCNF_CODIGO = 'CONF30')) FIRMA_PRE,
	(SELECT CRPER_FIRMA FROM SII.CGG_RES_PERSONA WHERE CRPER_CODIGO = (SELECT CGCNF_VALOR_CADENA FROM SII.CGG_CONFIGURACION WHERE CGCNF_CODIGO = 'CONF31')) FIRMA_SECRE
FROM SII.CGG_RES_PERSONA CRPER
INNER JOIN SII.CGG_RES_DOCUMENTO_IDENTIFICACIO CRDID ON (CRPER.CRDID_CODIGO = CRDID.CRDID_CODIGO)
INNER JOIN SII.CGG_RES_RESIDENCIA CRRSD ON CRPER.CRPER_CODIGO = CRRSD.CRPER_CODIGO AND CRRSD.CRRSD_VIGENTE
INNER JOIN SII.CGG_RES_TRAMITE TRM ON TRM.CRTRA_CODIGO = CRRSD.CRTRA_CODIGO
left join sii.cgg_res_persona_juridica pjr on pjr.crpjr_codigo = trm.crpjr_codigo
INNER JOIN SII.CGG_NACIONALIDAD CRNCN ON (CRNCN.CGNCN_CODIGO = CRPER.CGNCN_CODIGO )
INNER JOIN SII.CGG_RES_TIPO_SOLICITUD_TRAMITE CRTST ON (CRTST.CRTST_CODIGO = CRRSD.CRTST_CODIGO)
INNER JOIN SII.CGG_RES_CARNET CRNT ON CRNT.CRRSD_CODIGO = CRRSD.CRRSD_CODIGO AND CRNT.CRCNT_CODIGO = $P{P_CRCNT_CODIGO}]]>
	</queryString>
	<field name="crper_codigo" class="java.lang.String"/>
	<field name="nombres" class="java.lang.String"/>
	<field name="apellidos_paterno" class="java.lang.String"/>
	<field name="apellidos_materno" class="java.lang.String"/>
	<field name="cedula" class="java.lang.String"/>
	<field name="fecha_nac" class="java.sql.Timestamp"/>
	<field name="crper_lugar_nacimiento" class="java.lang.String"/>
	<field name="crdid_descripcion" class="java.lang.String"/>
	<field name="crper_genero" class="java.lang.Integer"/>
	<field name="crper_observaciones" class="java.lang.String"/>
	<field name="residencia" class="java.lang.String"/>
	<field name="crper_autorizado" class="java.lang.Boolean"/>
	<field name="crper_numero_expediente" class="java.lang.String"/>
	<field name="crper_fecha_archivo" class="java.sql.Timestamp"/>
	<field name="foto" class="java.lang.Object"/>
	<field name="firma" class="java.lang.Object"/>
	<field name="crtst_codigo" class="java.lang.String"/>
	<field name="modalidad" class="java.lang.Integer"/>
	<field name="descripcion" class="java.lang.String"/>
	<field name="aprobacion" class="java.sql.Timestamp"/>
	<field name="renovacion" class="java.sql.Timestamp"/>
	<field name="nacionalidad" class="java.lang.String"/>
	<field name="auspiciante" class="java.lang.String"/>
	<field name="motivo" class="java.lang.String"/>
	<field name="firma_pre" class="java.lang.Object"/>
	<field name="firma_secre" class="java.lang.Object"/>
	<detail>
		<band height="153" splitType="Stretch">
			<image>
				<reportElement x="70" y="25" width="103" height="102" uuid="8f263f79-77c1-490d-9430-0bb1b3640bcf">
					<printWhenExpression><![CDATA[$P{P_PREVIEW}==1]]></printWhenExpression>
				</reportElement>
				<imageExpression><![CDATA["repo:/Resources/sii/images/VistaPreliminar"]]></imageExpression>
			</image>
			<textField>
				<reportElement x="125" y="75" width="85" height="8" uuid="d00aaa0b-8345-4a51-8d74-9426ff6cf4e6"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cedula}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="72" y="75" width="52" height="8" uuid="60755d5c-0295-4aee-b15d-84ffadb9b904"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[CEDULA:]]></text>
			</staticText>
			<staticText>
				<reportElement x="72" y="59" width="52" height="8" uuid="77a9fba2-50f6-49f5-bc78-1562a27c1469"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[NOMBRES:]]></text>
			</staticText>
			<staticText>
				<reportElement x="72" y="67" width="52" height="8" uuid="7dc16a24-c87b-499b-885c-7be36a1b5e19"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[APELLIDOS:]]></text>
			</staticText>
			<staticText>
				<reportElement x="72" y="83" width="52" height="8" uuid="fbb497e8-60b3-4404-b8e4-f3c0d8cd00fe"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[NACIONALIDAD:]]></text>
			</staticText>
			<staticText>
				<reportElement x="72" y="91" width="52" height="8" uuid="53f95ec0-d5ca-46fc-b70e-36e0f7412d40"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[F. NACIMIENTO:]]></text>
			</staticText>
			<staticText>
				<reportElement x="72" y="99" width="52" height="8" uuid="a7c9d17c-6f65-4668-bf20-f2c3bb664bee"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[MOTIVO:]]></text>
			</staticText>
			<staticText>
				<reportElement x="72" y="115" width="52" height="8" uuid="bd14abbc-4df7-4e1b-bc2f-583f0c20497f"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[APROBACION:]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="125" y="115" width="35" height="8" uuid="fb55f825-5392-486d-a0e7-7e54b9f34830"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{aprobacion}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="160" y="115" width="35" height="8" uuid="da2b183d-90de-4d14-9ad7-5d5e75ae75a3"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{renovacion}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="122" width="72" height="10" uuid="fbe65f63-ace8-4990-8931-f8e82db656aa"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["No. "+$F{residencia}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="132" width="72" height="10" uuid="d80501ca-e253-45b1-9d14-02bbb0e96984"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{modalidad}.intValue()==0?"PERMANENTE":"TEMPORAL")]]></textFieldExpression>
			</textField>
			<image>
				<reportElement x="5" y="60" width="60" height="60" uuid="c9ddd21c-085b-4503-9bb6-e301ed1d0a2c"/>
				<imageExpression><![CDATA[new ByteArrayInputStream((byte[])$F{foto})]]></imageExpression>
			</image>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="125" y="91" width="84" height="8" uuid="42dbcd19-809b-492b-99a8-a14921ddd0d2"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_nac}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="125" y="59" width="104" height="8" uuid="3cb12deb-5cbc-4cd2-813e-d28c63275d37"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombres}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="125" y="83" width="85" height="8" uuid="20d6b811-413e-446c-a7f5-aa52b20fbe3e"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nacionalidad}.toUpperCase()]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="125" y="99" width="104" height="8" uuid="f30ab4c6-e6e2-44ab-af82-66841e9c0888"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{motivo}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="72" y="107" width="52" height="8" uuid="1e47f32a-a1b9-49db-8f5c-85b9f80719c8"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[AUSPICIANTE:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="125" y="107" width="104" height="8" uuid="7d250c70-97ad-4d3d-93ba-ca9cc1f5b6b7"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{auspiciante}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="125" y="67" width="85" height="8" uuid="6c268675-bf1a-4d61-b8e9-d91368ba9d7b"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{apellidos_paterno}+" "+$F{apellidos_materno}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="153">
			<image>
				<reportElement x="0" y="89" width="82" height="32" uuid="70d951bc-013e-40f2-8514-6b130af25bb1"/>
				<imageExpression><![CDATA[new ByteArrayInputStream((byte[])$F{firma_secre})]]></imageExpression>
			</image>
			<image>
				<reportElement x="160" y="90" width="82" height="32" uuid="8cb4cb85-0bb5-4a40-bbb9-d22ac2820cc0"/>
				<imageExpression><![CDATA[new ByteArrayInputStream((byte[])$F{firma})]]></imageExpression>
			</image>
			<componentElement>
				<reportElement x="72" y="70" width="110" height="17" uuid="2554ee21-c047-4dee-a756-b7b0f65991b5"/>
				<jr:Code128 xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" textPosition="none">
					<jr:codeExpression><![CDATA[$F{residencia}]]></jr:codeExpression>
				</jr:Code128>
			</componentElement>
		</band>
	</summary>
</jasperReport>
